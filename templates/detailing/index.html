{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% block title %}{% trans "detailing" %}{% endblock title %}
{% block header %}{% endblock header %}
{% block content %}
<div id="print_content">
	<h2>{% trans "bill" %}</h2>
	<hr>
	<h4>№ {{ bill.id  }}, {{ bill.dateb | date:"d.m.Y H:i"}}</h4>
	<h4>{% trans "place" %}: {{ bill.place  }}</h4>
	<hr>
	<h5>{% trans "total" %}: {{ bill.total | stringformat:"1.0f" }} 〒</h5>
	{% if bill.amount > 0 %}
		<h5>{% trans "discount" %}: {{ bill.discount }} %</h5>
		<h5>{% trans "bonus" %}: {{ bill.bonus | stringformat:"1.0f" }} 〒</h5>
		<h5>{% trans "amount" %}: {{ bill.amount | stringformat:"1.0f" }} 〒</h5>
	{% else %}
		<h5>{% trans "not yet paid" %}</h5>
	{% endif %}
	<hr>
	<h2>{% trans "detailing" %}</h2>
	{% if detailing.count > 0 %}
	<div class="row" id="print_content">
		<table id="myTable" class="table-manager" style="width:100%">
			<thead>
				<tr>
					<th><p>{% trans "category" %}</p></th>
					<th><p>{% trans "title" %}</p></th>
					<th><p>{% trans "price" %}</p></th>
					<th><p>{% trans "quantity" %}</p></th>
					<th class="hide_for_print_element"><p>{% trans "photo" %}</p></th>
					<th class="hide_for_print_element"><p><a href="{% url 'detailing_create' bill_id %}">{% trans "Create" %}</a></p></th>					
				</tr>
			</thead>
			<tbody>
				{% for p in detailing %}
				<tr>
					<td>
						<p>{{ p.catalog.category }}</p>
					</td>
					<td>
						<p>{{ p.catalog.title }}</p>
					</td>
					<td>
						<p>{{ p.price | stringformat:"1.0f" }} 〒</p>
					</td>
					<td>
						<p>{{ p.quantity }}</p>
					</td>
					<td class="hide_for_print_element">
						{% if p.catalog.photo.url != None %}					
							{% if p.catalog.photo.url == "/media/images/catalog01.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog01.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog02.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog02.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog03.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog03.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog04.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog04.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog05.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog05.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog06.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog06.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog07.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog07.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog08.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog08.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog09.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog09.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog10.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog10.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog11.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog11.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog12.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog12.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog13.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog13.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog14.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog14.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog15.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog15.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog16.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog16.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog17.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog17.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog18.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog18.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog19.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog19.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog20.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog20.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog21.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog21.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog22.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog22.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog23.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog23.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog24.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog24.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog25.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog25.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog26.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog26.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog27.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog27.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog28.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog28.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog29.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog29.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog30.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog30.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog31.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog31.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog32.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog32.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog33.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog33.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog34.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog34.jpg' %}" alt="{{ p.title }}" >    
							{% elif p.catalog.photo.url == "/media/images/catalog35.jpg" %}
								<img style="width:100%; max-width:200px;" src="{% static 'images/catalog35.jpg' %}" alt="{{ p.title }}" >    						
							{% else %}
								{% if p.catalog.photo.url != None %}
									<img style="width:100%; max-width:200px;" src="{{ p.photo.url}}" alt="{{ p.title }}" >
								{% endif %}
							{% endif %}								
						{% endif %}	
					</td>
					<td class="hide_for_print_element">	
						<p>
						<a  href="{% url 'detailing_edit' p.id bill_id %}">{% trans "Change" %}</a> |
						<a href="{% url 'detailing_read' p.id bill_id %}">{% trans "Read" %}</a> |
						<a onclick="return confirm('Удалить запись?')" href="{% url 'detailing_delete' p.id bill_id %}">{% trans "Delete" %}</a>
						</p>
					</td>			
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
	<div class="div-button-center hide_for_print_element">
		<button class="btn btn-info" name = "print" id ="print" onclick='printDiv("print_content")' style="text-align: center;width:150px">Печать</button>
		<!-- <button onclick="history.back()" class="btn btn-outline-info" style="width:100px">{% trans "Back" %}</button>	 	 -->
		<a class="btn btn-outline-info" style="width:150px" href="{% url 'bill_index'%}">{% trans "Back" %}</a>    
	</div>	
	{% else %}
	<a href="{% url 'detailing_create' bill_id %}">{% trans "Create" %}</a>
	{% endif %}
</div>
<script>
	function printDiv(divName) {
		// Печать контейнера div
		// Оригинальный контент
		var originalContents = document.body.innerHTML;
		// Скрываемый класс
		var collection = document.getElementsByClassName("hide_for_print_element");
		for(var i=0; i<collection.length; i++)collection[i].style.display='none';
		// Область печати
		var printContents = document.getElementById(divName).innerHTML;
		// Вывод на печать			
		document.body.innerHTML = printContents;
		window.print();
		// Возврат документа в исходное состояние
		document.body.innerHTML = originalContents;
	}
</script>
{% endblock content %}

